import{_ as e}from"./home-BMI35RZU.js";import{r as t}from"./news-DDvVS8Nc.js";async function n(e,n=null){const r=(n||JSON.parse(localStorage.getItem("posts")||"[]")).filter(e=>{const t=(e.category||"").toLowerCase();return"proyectos"===t||"projects"===t}),a=JSON.parse(localStorage.getItem("user")||"{}");if(e.innerHTML=`\n    <div style="text-align: center; margin-bottom: 40px;">\n      <h1 style="font-size: clamp(28px, 5vw, 36px); font-weight: 800; margin: 0 0 12px 0; color: var(--text);">\n        ğŸš€ Proyectos Estudiantiles\n      </h1>\n      <p style="color: var(--muted); font-size: clamp(16px, 3vw, 18px); margin: 0; max-width: 600px; margin: 0 auto; line-height: 1.6;">\n        Descubre los proyectos e investigaciones desarrollados por nuestros estudiantes\n      </p>\n      \n      ${"admin"===a.role?'\n        <div style="margin-top: 24px;">\n          <button onclick="openPublishModal(\'proyectos\')" class="btn-publicar">\n            ğŸš€ Nuevo proyecto\n          </button>\n        </div>\n      ':""}\n    </div>\n  `,!r.length)return void(e.innerHTML+=`\n      <div style="text-align: center; padding: 60px 20px; color: var(--muted);">\n        <div style="font-size: clamp(48px, 8vw, 64px); margin-bottom: 24px;">ğŸš€</div>\n        <h2 style="font-size: clamp(20px, 4vw, 24px); margin-bottom: 16px;">No hay proyectos disponibles</h2>\n        <p style="font-size: clamp(14px, 3vw, 16px); max-width: 400px; margin: 0 auto;">Los proyectos estudiantiles aparecerÃ¡n aquÃ­ cuando estÃ©n disponibles</p>\n        ${"admin"===a.role?'\n          <button onclick="openPublishModal(\'proyectos\')" class="btn-publicar" style="margin-top: 20px;">\n            ğŸš€ Crear primer proyecto\n          </button>\n        ':""}\n      </div>\n    `);const i=[...r].sort((e,t)=>{const n=new Date(e.updatedAt||e.createdAt||0);return new Date(t.updatedAt||t.createdAt||0)-n}),s=i[0];var d;s&&(e.innerHTML+=`\n      <div style="margin-bottom: 40px;">\n        <h2 style="color: var(--text); margin-bottom: 20px; font-size: clamp(20px, 4vw, 24px); text-align: center;">â­ Proyecto Destacado</h2>\n        <div id="featuredProjectCard" class="featured-project-card" style="\n          background: linear-gradient(135deg, var(--card), var(--panel)); \n          border-radius: var(--radius); \n          padding: clamp(16px, 3vw, 24px); \n          border: 2px solid var(--accent); \n          box-shadow: var(--shadow-lg); \n          cursor: pointer; \n          transition: all var(--fast);\n          overflow: hidden;\n        ">\n          ${d=s,`\n    <div class="featured-content" style="\n      display: grid; \n      grid-template-columns: minmax(0, 1fr); \n      gap: 24px; \n      align-items: center;\n    ">\n      <div class="post-media" style="\n        height: clamp(200px, 30vw, 250px); \n        border-radius: var(--radius-sm); \n        overflow: hidden;\n        width: 100%;\n      ">\n        ${function(e){if(!e.image)return'\n      <div style="display:flex;align-items:center;justify-content:center;height:100%;background:var(--bg);color:var(--muted);flex-direction:column;">\n        <div style="font-size: clamp(24px, 5vw, 32px); margin-bottom: 8px;">ğŸš€</div>\n        <div style="font-size: clamp(12px, 2vw, 14px);">No hay multimedia</div>\n      </div>\n    ';if("video"===e.type){const t=function(e){if(!e)return null;try{const t=new URL(e),n=t.hostname.toLowerCase();if(n.includes("youtube.com")){if(t.searchParams.get("v"))return`https://www.youtube.com/embed/${t.searchParams.get("v")}`;if(t.pathname.includes("/embed/"))return e}if(n.includes("youtu.be")){const e=t.pathname.replace("/","");if(e)return`https://www.youtube.com/embed/${e}`}if(n.includes("drive.google.com")){const t=e.match(/\/d\/([^\/]+)/);if(t)return`https://drive.google.com/file/d/${t[1]}/preview`}return null}catch(t){return null}}(e.image);return t?`\n        <iframe src="${o(t)}" \n                width="100%" \n                height="100%" \n                frameborder="0" \n                allowfullscreen \n                loading="lazy" \n                style="border-radius: var(--radius-sm);"\n                title="${o(e.title)}"></iframe>\n      `:`\n        <video controls preload="metadata" style="width:100%;height:100%;object-fit:cover;border-radius:var(--radius-sm);">\n          <source src="${o(e.image)}" />\n          Tu navegador no soporta video.\n        </video>\n      `}return`<img src="${o(e.image)}" alt="${o(e.title)}" loading="lazy" style="width:100%;height:100%;object-fit:cover;border-radius:var(--radius-sm);" />`}(d)}\n      </div>\n      <div class="featured-text">\n        <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">\n          <span style="background: var(--accent); color: var(--white); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">DESTACADO</span>\n          <span style="background: rgba(37,99,235,0.1); color: var(--accent); padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">PROYECTO</span>\n        </div>\n        <h3 style="font-size: clamp(20px, 4vw, 28px); margin: 0 0 16px 0; color: var(--text); font-weight: 700; line-height: 1.3;">${o(d.title)}</h3>\n        <p style="color: var(--muted); font-size: clamp(14px, 3vw, 16px); line-height: 1.6; margin: 0 0 16px 0;">\n          ${o((d.description||"").slice(0,150))}${d.description&&d.description.length>150?"...":""}\n        </p>\n        <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap; font-size: clamp(12px, 2.5vw, 14px);">\n          <span style="color: var(--accent); font-weight: 600;">â¤ï¸ ${d.likes||0}</span>\n          <span style="color: var(--muted);">ğŸ’¬ ${(d.comments||[]).length}</span>\n          <span style="color: var(--muted);">ğŸ“… ${function(e){if(!e)return"";try{const t=new Date(e),n=new Date-t,o=Math.floor(n/6e4),r=Math.floor(n/36e5),a=Math.floor(n/864e5);return o<1?"Ahora mismo":o<60?`Hace ${o} min`:r<24?`Hace ${r} h`:a<7?`Hace ${a} dÃ­as`:t.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}catch(t){return""}}(d.createdAt||d.updatedAt)}</span>\n        </div>\n      </div>\n    </div>\n  `}\n        </div>\n      </div>\n    `,setTimeout(()=>{const e=document.getElementById("featuredProjectCard");e&&(e.addEventListener("click",()=>{window.openPostDetail&&window.openPostDetail(s.id)}),e.addEventListener("mouseenter",()=>{e.style.transform="translateY(-4px)",e.style.boxShadow="var(--shadow-lg), 0 0 30px rgba(37,99,235,0.2)"}),e.addEventListener("mouseleave",()=>{e.style.transform="translateY(0)",e.style.boxShadow="var(--shadow-lg)"}))},20));const c=function(e){const t={science:[],technology:[],arts:[],social:[],other:[]};return e.forEach(e=>{const n=`${(e.title||"").toLowerCase()} ${(e.description||"").toLowerCase()}`;/ciencia|biolog|quÃ­mica|fÃ­sica|matemÃ¡t|experimento|laboratorio|investigaciÃ³n/.test(n)?t.science.push(e):/tecnolog|programa|app|software|web|robot|cÃ³digo|digital|informÃ¡tica/.test(n)?t.technology.push(e):/arte|mÃºsica|teatro|danza|pintura|cultura|creatividad|diseÃ±o/.test(n)?t.arts.push(e):/social|comunidad|solidario|historia|geografÃ­a|ambiente|ecologÃ­a|sostenible/.test(n)?t.social.push(e):t.other.push(e)}),t}(i.slice(1));["science","technology","arts","social","other"].forEach(n=>{const o=c[n];if(!o.length)return;const r=document.createElement("div");r.style.marginBottom="40px",r.innerHTML=`\n      <h2 style="\n        color: var(--text); \n        margin-bottom: 20px; \n        font-size: clamp(20px, 4vw, 24px); \n        text-align: center;\n        padding: 12px 20px;\n        background: rgba(37,99,235,0.1);\n        border-radius: var(--radius);\n        border: 1px solid var(--border);\n      ">\n        ${{science:"ğŸ”¬ Ciencias",technology:"ğŸ’» TecnologÃ­a",arts:"ğŸ¨ Arte y Cultura",social:"ğŸŒ Proyectos Sociales",other:"ğŸ“š Otros Proyectos"}[n]||n} (${o.length})\n      </h2>\n      <div class="posts-grid responsive-projects-grid" id="${n}Grid" style="\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        gap: clamp(16px, 3vw, 32px);\n        margin-top: 24px;\n      "></div>\n    `,e.appendChild(r);const a=r.querySelector(`#${n}Grid`);t(a,o)});const l=document.createElement("style");l.textContent="\n    @media (max-width: 768px) {\n      .featured-project-card .featured-content {\n        grid-template-columns: 1fr !important;\n        gap: 16px !important;\n      }\n      \n      .featured-project-card .post-media {\n        height: 200px !important;\n      }\n      \n      .responsive-projects-grid {\n        grid-template-columns: 1fr !important;\n        gap: 20px !important;\n      }\n    }\n    \n    @media (max-width: 480px) {\n      .featured-project-card {\n        padding: 16px !important;\n      }\n      \n      .featured-project-card .post-media {\n        height: 180px !important;\n      }\n    }\n  ",document.head.querySelector("#projects-responsive-styles")||(l.id="projects-responsive-styles",document.head.appendChild(l))}function o(e){const t=document.createElement("div");return t.textContent=e||"",t.innerHTML}window.openPublishModal=window.openPublishModal||function(t=""){e(()=>import("./Publish-BG02N97L.js"),[]).then(e=>{e.renderPublish(document.body,e=>{(window.showToast||(()=>{}))("ğŸš€ Proyecto publicado correctamente","success"),setTimeout(()=>location.reload(),800)}),t&&setTimeout(()=>{const e=document.getElementById("pub-cat")||document.getElementById("pub-category");e&&(e.value=t)},120)})},window.addEventListener("resize",()=>{const e=document.querySelector(".featured-project-card .featured-content");e&&(window.innerWidth>768?e.style.gridTemplateColumns="400px 1fr":e.style.gridTemplateColumns="1fr")});export{n as r};
