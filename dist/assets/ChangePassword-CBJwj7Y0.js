function e(){if(!function(){const e=JSON.parse(localStorage.getItem("user")||"{}");return e&&"admin"===e.role}())return void showToast("‚ùå Solo administradores pueden cambiar la contrase√±a","error");const e=document.getElementById("changePasswordModal");e&&e.remove();const o=document.createElement("div");o.id="changePasswordModal",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.zIndex="2000",o.style.background="rgba(0,0,0,0.65)";const n=document.createElement("div");n.style.width="520px",n.style.maxWidth="92%",n.style.background="linear-gradient(180deg, rgba(12,18,28,0.96), rgba(3,9,18,0.98))",n.style.border="1px solid rgba(66, 153, 255, 0.12)",n.style.boxShadow="0 8px 30px rgba(2,6,23,0.6)",n.style.borderRadius="12px",n.style.padding="22px",n.style.color="var(--muted)",n.style.fontFamily="Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial";const a=document.createElement("div");a.style.display="flex",a.style.justifyContent="space-between",a.style.alignItems="center",a.style.marginBottom="12px";const r=document.createElement("h3");r.textContent="üîí Cambiar contrase√±a (admin)",r.style.margin="0",r.style.color="var(--accent-light)",r.style.fontSize="18px",r.style.fontWeight="700";const s=document.createElement("button");s.innerHTML="‚úñ",s.style.background="transparent",s.style.border="none",s.style.color="var(--muted)",s.style.fontSize="18px",s.style.cursor="pointer",s.addEventListener("click",()=>o.remove()),a.appendChild(r),a.appendChild(s);const d=document.createElement("div");d.style.display="grid",d.style.gap="10px";const l=(e,t,o="password")=>`<div style="display:flex;flex-direction:column;gap:6px;">\n      <label for="\${id}" style="font-size:13px;color:var(--muted)">${t}</label>\n      <input id="\${id}" type="\${type}" style="padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);outline:none" />\n    </div>`;d.innerHTML=`\n    ${l(0,"Contrase√±a actual")}\n    ${l(0,"Nueva contrase√±a (m√≠n 6 caracteres)")}\n    ${l(0,"Confirmar nueva contrase√±a")}\n    <div style="display:flex;justify-content:flex-end;margin-top:4px;gap:8px;">\n      <button id="cancelChangePw" style="padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);cursor:pointer">Cancelar</button>\n      <button id="submitChangePw" style="padding:10px 16px;border-radius:10px;background:linear-gradient(90deg,#2b6cff,#4ea1ff);border:none;color:white;cursor:pointer;font-weight:600">Guardar</button>\n    </div>\n  `,n.appendChild(a),n.appendChild(d),o.appendChild(n),document.body.appendChild(o),document.getElementById("cancelChangePw").addEventListener("click",()=>o.remove()),document.getElementById("submitChangePw").addEventListener("click",t)}function t(){const e=document.getElementById("currentPassword").value||"",t=document.getElementById("newPassword").value||"",o=document.getElementById("confirmPassword").value||"";if(!e||!t||!o)return void showToast("‚ùó Todos los campos son obligatorios","error");if(t.length<6)return void showToast("üîí La nueva contrase√±a debe tener al menos 6 caracteres","error");if(t!==o)return void showToast("‚ùó Las contrase√±as no coinciden","error");const n=JSON.parse(localStorage.getItem("user")||"{}");if(!n||"admin"!==n.role)return void showToast("‚ùå Usuario no autorizado","error");const a=localStorage.getItem("admin_password");if(a&&a!==e)return void showToast("‚ùå Contrase√±a actual incorrecta","error");localStorage.setItem("admin_password",t),n.password=t,localStorage.setItem("user",JSON.stringify(n)),showToast("‚úÖ Contrase√±a actualizada correctamente","success");const r=document.getElementById("changePasswordModal");r&&r.remove()}const o={openChangePasswordModal:e};export{o as default,e as openChangePasswordModal};
